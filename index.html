<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Cyberdeck Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400..900&display=swap');

        /* --- Global Resets for Full-Screen Fit --- */
        html, body {
            height: 100%; /* Ensures body fills HTML element */
            margin: 0;
            padding: 0;
            overflow: hidden; /* CRITICAL: Prevents accidental scrolling */
            box-sizing: border-box; /* CRITICAL: Padding and border included in element's total width and height */
        }
        
        /* --- Custom Variables and Colors --- */
        :root {
            --neon-primary: #00e5ff; /* Bright Cyan/Aqua */
            --neon-secondary: #ff00ff; /* Magenta for Contrast */
            --dark-bg: #0d1117; 
            --panel-bg: rgba(1, 10, 20, 0.7);
            --border-color: rgba(0, 229, 255, 0.5);
            --glow-light: 0 0 5px var(--neon-primary), 0 0 10px rgba(0, 229, 255, 0.4);
        }

        body {
            font-family: 'Share Tech Mono', monospace;
            background-color: var(--dark-bg);
            color: var(--neon-primary);
            font-size: 14px; 
            /* Use 100vh only here to ensure the container uses the full viewport space */
            height: 100vh; 
        }
        
        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }

        /* --- FRAME AND GLOW EFFECTS --- */
        .hacker-container {
            /* Now explicitly uses 100% of the body height (100vh) */
            height: 100%; 
            padding: 1vh 1vw; /* Fluid padding */
            box-sizing: border-box;
            margin: 0 auto;
        }

        .hacker-frame-bg {
            background-color: var(--panel-bg);
            border: 2px solid var(--border-color);
            box-shadow: var(--glow-light);
            border-radius: 10px;
            position: relative;
            z-index: 10;
            height: 100%;
            width: 100%;
            padding: 0.5rem; 
            background-image: linear-gradient(0deg, transparent 95%, rgba(0, 229, 255, 0.05) 100%), 
                              linear-gradient(90deg, transparent 95%, rgba(0, 229, 255, 0.05) 100%);
            background-size: 20px 20px;
        }

        .neon-text {
            color: var(--neon-primary);
            text-shadow: var(--glow-light);
        }

        .neon-border {
            border: 1px solid var(--border-color);
            box-shadow: 0 0 4px rgba(0, 229, 255, 0.3);
            border-radius: 6px;
            background-color: rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .app-button {
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border-left: 3px solid var(--neon-primary);
            padding: 6px 10px; 
            margin: 3px 0;
            background-color: rgba(0, 0, 0, 0.4);
            font-weight: 500;
            font-size: 0.8rem;
        }

        .app-button:hover {
            background-color: rgba(0, 229, 255, 0.1);
            box-shadow: 0 0 10px var(--neon-primary);
            border-left-color: var(--neon-secondary);
            transform: scale(1.02);
        }

        .system-btn {
            @apply px-3 py-1 text-xs uppercase font-bold tracking-wider;
            transition: all 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: none;
            width: 33.33%; 
        }

        /* --- CENTER RADIAL BUTTONS (Adaptive) --- */
        .radial-button {
            position: absolute;
            text-align: center;
            border: 1px solid var(--border-color);
            background-color: rgba(255, 0, 255, 0.1); 
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s, color 0.2s;
            text-transform: uppercase;
            box-shadow: 0 0 4px var(--neon-secondary);
            transform: rotate(var(--angle)) translate(0px, var(--radius-y)) rotate(calc(var(--angle) * -1));
        }
        
        .radial-button:hover {
            background-color: rgba(255, 0, 255, 0.4);
            box-shadow: 0 0 15px var(--neon-secondary);
            color: white;
        }

        /* MOBILE/SMALL SCREEN STYLES */
        @media (max-width: 1023px) {
            .radial-button {
                width: 60px; 
                height: 22px;
                line-height: 22px;
                font-size: 0.55rem;
                --radius-y: -90px;
            }
        }

        /* DESKTOP/LARGE SCREEN STYLES */
        @media (min-width: 1024px) {
            .radial-button {
                width: 90px;
                height: 32px;
                line-height: 32px;
                font-size: 0.75rem;
                --radius-y: -170px;
            }
        }
        
        /* Log Stream MUST have a defined max-height and overflow-y: scroll to prevent container growth */
        .log-entry-wrapper {
            /* Using fluid vh units for max-height on mobile */
            max-height: 15vh; 
            overflow-y: scroll;
            -ms-overflow-style: none;  
            scrollbar-width: none;  
        }
        .log-entry-wrapper::-webkit-scrollbar {
            display: none; 
        }
        @media (min-width: 1024px) {
             .log-entry-wrapper {
                /* Larger max-height on desktop, still ensuring no overflow */
                max-height: 20vh;
            }
        }
        
        /* RAM BAR FIX: Added h-full in HTML, setting size here for consistency */
        .vertical-gauge {
            width: 15px; 
        }
        @media (min-width: 1024px) {
            .vertical-gauge {
                width: 20px;
            }
        }
        
        .top-app-icon {
            @apply flex flex-col items-center justify-center text-xs text-gray-400 cursor-pointer transition-colors hover:text-cyan-400;
        }

        /* --- Vertical Gauge Colors (Dynamically applied in JS) --- */
        .gauge-low {
            background-color: #00ff00; /* Green */
            box-shadow: 0 0 5px #00ff00;
        }
        .gauge-medium {
            background-color: #ffcc00; /* Yellow */
            box-shadow: 0 0 5px #ffcc00;
        }
        .gauge-high {
            background-color: #ff4444; /* Red */
            box-shadow: 0 0 5px #ff4444;
        }
    </style>
</head>
<body class="bg-black">
    <!-- Main Frame Container (Takes 100% of 100vh) -->
    <div class="hacker-container">
        <div class="hacker-frame-bg flex flex-col">
            
            <!-- TOP BAR (Fixed height) -->
            <div class="top-bar flex justify-between items-center px-3 lg:px-6 py-2 border-b-2 border-opacity-50 border-cyan-500 mb-2 lg:mb-3 flex-shrink-0">
                <div class="text-base lg:text-lg font-bold tracking-widest neon-text font-orbitron">
                    :: Aditya ROOT ACCESS ::
                </div>
                <div id="top-apps" class="hidden sm:flex flex-grow justify-center space-x-4 lg:space-x-8 text-sm mx-4">
                    <div class="top-app-icon" onclick="openApp('GitHub')">
                        <svg class="w-4 h-4 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                        <span class="hidden sm:block text-[10px] mt-0.5">REPO</span>
                    </div>
                    <div class="top-app-icon" onclick="openApp('WhatsApp')">
                        <svg class="w-4 h-4 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                        <span class="hidden sm:block text-[10px] mt-0.5">CHAT</span>
                    </div>
                    <div class="top-app-icon" onclick="openApp('uTorrent')">
                        <svg class="w-4 h-4 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        <span class="hidden sm:block text-[10px] mt-0.5">TRANSFERS</span>
                    </div>
                </div>
                <div id="digital-clock" class="text-xl lg:text-2xl font-orbitron neon-text whitespace-nowrap tracking-wider flex-shrink-0"></div>
            </div>

            <!-- MAIN CONTENT AREA: Uses flex-grow to fill remaining space -->
            <div class="main-content flex flex-grow flex-col lg:flex-row lg:space-x-4 space-y-4 lg:space-y-0 p-1 lg:p-2 overflow-hidden">
                
                <!-- LEFT PANEL (1/4 width on desktop, full width on mobile) -->
                <div class="w-full lg:w-1/4 flex flex-col space-y-3 lg:space-y-4 flex-shrink-0 lg:flex-shrink">
                    
                    <!-- System Controls (Fixed height) -->
                    <div class="flex space-x-2 flex-shrink-0">
                        <button class="neon-border system-btn bg-red-800 bg-opacity-30 hover:bg-red-700/50" onclick="systemAction('SHUTDOWN')">SHUTDOWN</button>
                        <button class="neon-border system-btn hover:bg-cyan-500/20" onclick="systemAction('RESTART')">RESTART</button>
                        <button class="neon-border system-btn hover:bg-cyan-500/20" onclick="systemAction('LOG OFF')">LOG OFF</button>
                    </div>

                    <!-- RAM Usage Panel (Uses flex-grow to fill vertical space) -->
                    <div class="neon-border p-3 flex flex-grow h-full overflow-hidden">
                        <!-- FIX: Added h-full to vertical-gauge so children can calculate absolute height -->
                        <div class="vertical-gauge h-full mr-3 lg:mr-4 relative flex-shrink-0">
                            <div class="absolute inset-0 border border-opacity-50 border-cyan-500 rounded-sm bg-gray-900/50"></div>
                            <!-- Added dynamic color class here. Class is set in JS -->
                            <div id="ram-bar" class="ram-bar gauge-medium w-full rounded-sm absolute bottom-0 transition-colors duration-500" style="height: 52%;"></div>
                        </div>
                        <div class="flex-grow flex flex-col">
                            <div class="text-sm lg:text-base font-bold mb-1 neon-text flex-shrink-0">RAM USAGE: <span id="ram-percent">52%</span></div>
                            <div class="text-xs text-gray-500 mb-2 flex-shrink-0">Total: 16GB | Used: <span id="ram-used-gb">8.32GB</span></div>
                            <div id="app-list" class="grid grid-cols-2 lg:flex lg:flex-col gap-1 text-xs space-y-0 lg:space-y-1 flex-grow overflow-y-auto">
                                <div class="app-button" onclick="openApp('VSCode')">VSCode (IDE)</div>
                                <div class="app-button" onclick="openApp('Chrome')">Chrome (Browser)</div>
                                <div class="app-button" onclick="openApp('Brave')">Brave (VPN)</div>
                                <div class="app-button hidden sm:block" onclick="openApp('File Explorer')">File Explorer</div>
                                <div class="app-button hidden sm:block" onclick="openApp('Settings')">System Config</div>
                                <div class="app-button" onclick="openApp('Terminal')">Terminal (CMD)</div>
                                <div class="app-button" onclick="openApp('Mail')">Secure Mail</div>
                                <div class="app-button" onclick="openApp('Crypto')">Wallet Tracker</div>
                            </div>
                        </div>
                    </div>

                    <!-- NETWORK ACTIVITY PANEL (Fixed height) -->
                    <div class="neon-border p-3 text-sm flex flex-col space-y-2 flex-shrink-0">
                        <div class="font-bold text-sm lg:text-base font-orbitron border-b border-cyan-500/50 pb-1">:: NETWORK BRIDGE (ETH0) ::</div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">STATUS:</span>
                            <span id="net-status" class="text-green-400 font-bold tracking-widest">CONNECTED</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">IP ADDRESS:</span>
                            <span id="net-ip" class="text-cyan-400">192.168.1.101</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">BANDWIDTH (Tx/Rx):</span>
                            <span id="net-bandwidth" class="neon-text">1.4 MB/s / 87 KB/s</span>
                        </div>
                        <div class="h-1.5 w-full bg-gray-800 rounded-full">
                            <div id="net-activity-bar" class="h-full rounded-full bg-green-500 transition-all duration-500" style="width: 75%; box-shadow: 0 0 5px green;"></div>
                        </div>
                    </div>
                </div>

                <!-- CENTER AREA: Canvas Animation and Radial Folder Options (1/2 width on desktop, uses flex-grow) -->
                <div class="w-full lg:w-1/2 flex flex-col items-center relative flex-grow overflow-hidden">
                    
                    <!-- Central Animated Design Container (Uses flex-grow for space) -->
                    <div class="relative w-full max-w-sm sm:max-w-md lg:w-full lg:max-w-lg aspect-square flex items-center justify-center flex-grow">
                        <!-- We use absolute positioning for canvas to fill the available space dynamically -->
                        <div class="absolute inset-0 flex items-center justify-center opacity-10 border-4 border-double border-cyan-500/20 rounded-full m-8">
                            <span class="text-4xl lg:text-8xl neon-text font-orbitron select-none opacity-5 tracking-widest">A.I. CORE</span>
                        </div>
                        
                        <canvas id="canvas-center" class="w-full h-full"></canvas>
                        
                        <!-- Folder Options (Radial around the center) -->
                        <div id="folder-menu" class="absolute inset-0 flex items-center justify-center">
                            <button class="radial-button" style="--angle: 0deg;" onclick="openFolder('Downloads')">Downloads</button>
                            <button class="radial-button" style="--angle: 60deg;" onclick="openFolder('Documents')">Documents</button>
                            <button class="radial-button" style="--angle: 120deg;" onclick="openFolder('Video')">Video</button>
                            <button class="radial-button" style="--angle: 180deg;" onclick="openFolder('Pictures')">Pictures</button>
                            <button class="radial-button" style="--angle: 240deg;" onclick="openFolder('C Drive')">System Root</button>
                            <button class="radial-button" style="--angle: 300deg;" onclick="openFolder('D Drive')">Data Backup</button>
                        </div>
                    </div>
                    
                    <!-- TERMINAL LOG STREAM (Uses defined max-height) -->
                    <div class="text-xs w-full mt-2 lg:mt-4 neon-border p-3 opacity-90 font-['Share Tech Mono'] log-entry-wrapper flex-shrink-0">
                        <div id="log-stream" class="space-y-0.5 flex flex-col-reverse">
                            <div class="text-gray-500">INIT: Starting system monitor daemon... [OK]</div>
                        </div>
                    </div>

                    <!-- Terminal Prompt (Fixed height) -->
                    <div class="text-sm mt-2 lg:mt-4 p-2 neon-border w-full bg-gray-900/50 font-['Share Tech Mono'] flex-shrink-0">
                        <span class="text-green-400 font-bold">[root@system]</span> $<span id="terminal-cursor"> |</span>
                    </div>
                </div>

                <!-- RIGHT PANEL (1/4 width on desktop, full width on mobile) -->
                <div class="w-full lg:w-1/4 flex flex-col space-y-3 lg:space-y-4 flex-shrink-0 lg:flex-shrink">
                    
                    <!-- Top Right Date/Time (Fixed height) -->
                    <div class="text-right p-3 neon-border font-orbitron bg-cyan-900/10 relative overflow-hidden flex-shrink-0">
                        <div id="big-month-day" class="text-3xl lg:text-5xl font-extrabold neon-text"></div>
                        <div id="big-weekday" class="text-sm lg:text-base text-cyan-400 opacity-80"></div>
                        <div id="big-year" class="text-xs text-gray-500 opacity-50"></div>
                    </div>

                    <!-- Animated Canvas Panel (Uses flex-grow to fill vertical space) -->
                    <div class="neon-border flex-grow p-1 relative overflow-hidden min-h-[15vh] lg:min-h-[25vh]">
                         <div class="absolute inset-0 opacity-10 pointer-events-none">
                            <div class="h-full w-full border-l border-r border-dashed border-cyan-500/30"></div>
                        </div>
                        <canvas id="canvas-right" class="w-full h-full"></canvas>
                        <div class="absolute bottom-1 left-1 text-[8px] text-gray-500 opacity-70">DATA STREAM INITIATED</div>
                    </div>

                    <!-- Circular Gauge (Fixed height) -->
                    <div class="neon-border p-3 lg:p-4 flex justify-center items-center bg-gray-900/50 flex-shrink-0">
                        <div class="w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 relative">
                            <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                                <circle class="text-gray-700 stroke-current opacity-30" stroke-width="6" cx="50" cy="50" r="45" fill="transparent"></circle>
                                <!-- CPU gauge color is dynamically set in JS -->
                                <circle id="cpu-gauge" class="stroke-current neon-text transition-all duration-1000" stroke-width="8" stroke-linecap="round" cx="50" cy="50" r="40" fill="transparent" style="stroke-dasharray: 251.2; stroke-dashoffset: 75.36;"></circle>
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center text-sm lg:text-md font-orbitron">
                                <span id="cpu-label" class="text-xs text-gray-400">CPU LOAD</span>
                                <span id="cpu-percent" class="text-lg lg:text-xl font-bold">70%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Media Player Controls (Fixed height) -->
                    <div class="neon-border p-3 text-center text-xs lg:text-sm bg-gray-900/50 flex-shrink-0">
                        <div class="mb-2 uppercase">ACTIVE SESSION: <span class="text-sm neon-text font-orbitron">Encrypted Stream</span></div>
                        <div class="flex justify-center space-x-4">
                            <button class="transition-colors hover:text-cyan-300 active:text-cyan-600" onclick="mediaAction('PREV')">
                                <svg class="w-5 h-5 lg:w-6 lg:h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
                            </button>
                            <button class="transition-colors hover:text-cyan-300 active:text-cyan-600" onclick="mediaAction('PLAY_PAUSE')">
                                <svg class="w-7 h-7 lg:w-8 lg:h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5.14V19l11-6.93L8 5.14z"></path></svg>
                            </button>
                            <button class="transition-colors hover:text-cyan-300 active:text-cyan-600" onclick="mediaAction('NEXT')">
                                <svg class="w-5 h-5 lg:w-6 lg:h-6 rotate-180" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- GLOBAL NOTIFICATION BOX -->
    <div id="notification-box" class="fixed inset-0 z-50 pointer-events-none flex items-center justify-center hidden">
        <div id="notification-message" class="neon-border p-4 lg:p-6 text-base lg:text-xl bg-gray-900/90 text-red-400 font-orbitron opacity-0 transition-opacity duration-300 transform translate-y-4">
            <!-- Message goes here -->
        </div>
    </div>

    <script>
        const NEON_COLOR = '#00e5ff';
        const ACCENT_COLOR = '#ff00ff';

        // =========================================================================
        // IMPORTANT NOTE ON REAL-TIME DATA:
        // Due to browser security restrictions, JavaScript running in a standard 
        // HTML page CANNOT access local operating system metrics like real CPU load, 
        // RAM usage, or network statistics. The data below remains simulated. 
        // To get real data, you would need a backend server and a separate desktop 
        // application that retrieves the metrics and pushes them to the browser.
        // =========================================================================

        // Utility function for setting up Canvas contexts and responsiveness
        const setupCanvas = (id) => {
            const canvas = document.getElementById(id);
            const ctx = canvas.getContext('2d');
            const parent = canvas.parentElement;

            // Function to make canvas size match its parent element dynamically
            const resize = () => {
                // Use offsetWidth/offsetHeight for accurate, non-padded dimensions
                canvas.width = parent.offsetWidth;
                canvas.height = parent.offsetHeight;
                
                // CRITICAL: Re-initialize the animated elements on resize to fit new dimensions
                if (id === 'canvas-right') initializeLines(canvas.height);
                // Center animation adjusts automatically based on current size
            };

            // Initial resize and listen for window resize event
            resize();
            window.addEventListener('resize', resize);
            
            return { canvas, ctx, resize };
        };

        // Utility function to display non-alert messages
        const showNotification = (message, duration = 2000, isError = true) => {
            const box = document.getElementById('notification-box');
            const msgEl = document.getElementById('notification-message');
            
            if (!box || !msgEl) return;

            msgEl.textContent = message;
            msgEl.classList.toggle('text-red-400', isError);
            msgEl.classList.toggle('text-green-400', !isError);
            
            box.classList.remove('hidden');
            
            setTimeout(() => {
                msgEl.style.opacity = '1';
                msgEl.style.transform = 'translateY(0)';
                msgEl.style.boxShadow = isError ? '0 0 20px rgba(255, 0, 0, 0.7)' : '0 0 20px rgba(0, 255, 0, 0.7)';
            }, 50);

            setTimeout(() => {
                msgEl.style.opacity = '0';
                msgEl.style.transform = 'translateY(4px)';
                msgEl.style.boxShadow = 'none';
                setTimeout(() => {
                    box.classList.add('hidden');
                }, 300); 
            }, duration);
        };

        // --- Mock Action Handlers ---
        const openApp = (name) => {
            showNotification(`APP LAUNCH: Starting ${name}...`, 1500, false);
            updateLogStream(`[INFO] Application ${name} launched.`);
        }
        const systemAction = (action) => {
            showNotification(`SYSTEM ALERT: Executing ${action}!`, 1800, action === 'SHUTDOWN');
            updateLogStream(`[CRITICAL] System action triggered: ${action}.`);
        }
        const openFolder = (folder) => {
            showNotification(`ACCESS: Opening folder ${folder}...`, 1500, false);
            updateLogStream(`[INFO] Accessing directory: ${folder}.`);
        }
        const mediaAction = (action) => {
            showNotification(`MEDIA: ${action}`, 1000, false);
        }

        // --- Clock and Date Update ---
        const updateClocks = () => {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
            
            const digitalClock = document.getElementById('digital-clock');
            if(digitalClock) digitalClock.textContent = timeStr; 

            const bigMonthDay = document.getElementById('big-month-day');
            const bigWeekday = document.getElementById('big-weekday');
            const bigYear = document.getElementById('big-year');

            const monthDayStr = now.toLocaleDateString('en-US', { month: 'short', day: '2-digit' }).toUpperCase().replace('.', '');
            const yearStr = now.getFullYear();
            
            if(bigMonthDay) bigMonthDay.textContent = monthDayStr;
            if(bigWeekday) bigWeekday.textContent = now.toLocaleDateString('en-US', { weekday: 'long' }).toUpperCase();
            if(bigYear) bigYear.textContent = `ACCESS YR ${yearStr}`;

        };

        // --- RAM/CPU Simulation ---
        let ramUsage = 52;
        let cpuUsage = 70;
        const totalRamGB = 16;

        const updateSystemMetrics = () => {
            // Simulated Data: change usage randomly within safe bounds
            ramUsage = Math.min(95, Math.max(30, ramUsage + Math.floor(Math.random() * 5) - 2)); 
            cpuUsage = Math.min(98, Math.max(20, cpuUsage + Math.floor(Math.random() * 7) - 3));
            
            const ramBar = document.getElementById('ram-bar');
            const ramPercent = document.getElementById('ram-percent');
            const ramUsedGBEl = document.getElementById('ram-used-gb');

            // --- RAM Usage Update (Fix Implemented) ---
            const ramUsedGB = (totalRamGB * ramUsage / 100).toFixed(2);
            if(ramBar) ramBar.style.height = `${ramUsage}%`; // Set height
            if(ramPercent) ramPercent.textContent = `${ramUsage}%`;
            if(ramUsedGBEl) ramUsedGBEl.textContent = `${ramUsedGB}GB`;

            // Dynamic RAM Bar Color
            if (ramBar) {
                ramBar.classList.remove('gauge-low', 'gauge-medium', 'gauge-high');
                if (ramUsage < 60) {
                    ramBar.classList.add('gauge-low'); // Green
                } else if (ramUsage < 85) {
                    ramBar.classList.add('gauge-medium'); // Yellow
                } else {
                    ramBar.classList.add('gauge-high'); // Red
                }
            }


            // --- CPU Usage Update ---
            const cpuGauge = document.getElementById('cpu-gauge');
            const cpuPercent = document.getElementById('cpu-percent');
            const offset = 251.2 * (1 - cpuUsage / 100);
            if(cpuGauge) cpuGauge.style.strokeDashoffset = offset.toFixed(2);
            if(cpuPercent) cpuPercent.textContent = `${cpuUsage}%`;
            
            // Dynamic CPU Ring Color
            if (cpuGauge) {
                if (cpuUsage < 70) {
                    cpuGauge.style.stroke = NEON_COLOR; // Cyan
                } else if (cpuUsage < 90) {
                    cpuGauge.style.stroke = '#ffcc00'; // Yellow
                } else {
                    cpuGauge.style.stroke = '#ff4444'; // Red
                }
            }
        };
        
        // --- Network Activity Simulation ---
        const updateNetworkMetrics = () => {
            const txRate = (Math.random() * 5 + 0.5).toFixed(1); 
            const rxRate = (Math.random() * 500 + 50).toFixed(0); 
            const activityPercent = Math.min(100, Math.max(20, Math.floor(Math.random() * 40) + 50)); 

            const bandwidthEl = document.getElementById('net-bandwidth');
            const activityBar = document.getElementById('net-activity-bar');
            const statusEl = document.getElementById('net-status');
            
            if (bandwidthEl) bandwidthEl.textContent = `${txRate} MB/s / ${rxRate} KB/s`;
            if (activityBar) activityBar.style.width = `${activityPercent}%`;
            
            if (Math.random() < 0.05) { 
                statusEl.textContent = 'PACKET LOSS';
                statusEl.className = 'text-yellow-400 font-bold tracking-widest';
                activityBar.style.backgroundColor = '#facc15'; 
                activityBar.style.boxShadow = '0 0 5px #facc15';
            } else {
                statusEl.textContent = 'CONNECTED';
                statusEl.className = 'text-green-400 font-bold tracking-widest';
                activityBar.style.backgroundColor = '#10b981'; 
                activityBar.style.boxShadow = '0 0 5px #10b981';
            }
        };

        // --- Log Stream Simulation ---
        const logMessages = [
            (pid) => `<span class="text-green-400">[${pid}] ${new Date().toLocaleTimeString()} :: SSH connection established from 10.0.0.${Math.floor(Math.random() * 255)}`,
            (pid) => `<span class="text-yellow-400">[${pid}] ${new Date().toLocaleTimeString()} :: WARNING: High CPU utilization detected in process 'data_mine'.`,
            (pid) => `<span class="text-cyan-400">[${pid}] ${new Date().toLocaleTimeString()} :: INFO: File encryption cycle complete. Status: [SUCCESS]`,
            (pid) => `<span class="text-gray-500">[${pid}] ${new Date().toLocaleTimeString()} :: PING: Latency check to external server... ${Math.floor(Math.random() * 50) + 10}ms.`,
            (pid) => `<span class="text-red-400">[${pid}] ${new Date().toLocaleTimeString()} :: CRITICAL: Attempted access violation on protected directory /root/system-config.`
        ];
        let currentPid = 1000;

        const updateLogStream = (customMessage = null) => {
            const logStream = document.getElementById('log-stream');
            if (!logStream) return;
            
            const messageFunc = customMessage 
                ? () => `<span class="text-cyan-400">[${currentPid}] ${new Date().toLocaleTimeString()} :: ${customMessage}</span>`
                : logMessages[Math.floor(Math.random() * logMessages.length)];

            const newMessage = document.createElement('div');
            newMessage.className = 'text-xs font-mono whitespace-nowrap'; 
            newMessage.innerHTML = messageFunc(currentPid++);
            
            logStream.prepend(newMessage);
            logStream.scrollTop = 0; 

            // Keep only the latest 20 messages visible
            while (logStream.children.length > 20) {
                logStream.removeChild(logStream.lastChild);
            }
        };
        
        // --- Terminal Cursor Blink ---
        const terminalCursor = document.getElementById('terminal-cursor');
        if (terminalCursor) {
            setInterval(() => {
                terminalCursor.style.visibility = terminalCursor.style.visibility === 'hidden' ? 'visible' : 'hidden';
            }, 500);
        }

        // --- Center Canvas Animation (Rotating Rings and lines) ---
        const centerAnimation = () => {
            const { canvas, ctx } = setupCanvas('canvas-center');
            let rotation = 0;
            const elements = [];
            
            // Initialize elements only once
            for(let i=0; i<30; i++) {
                elements.push({
                    angle: Math.random() * Math.PI * 2,
                    speed: (Math.random() * 0.01 + 0.005) * (i % 2 === 0 ? 1 : -1),
                    radiusFactor: 0.2 + Math.random() * 0.6,
                    length: Math.random() * 0.1 + 0.05
                });
            }


            const draw = () => {
                const { width, height } = canvas;
                const centerX = width / 2;
                const centerY = height / 2;
                const maxRadius = Math.min(centerX, centerY) * 0.9; 

                ctx.clearRect(0, 0, width, height); 
                rotation += 0.003; 

                ctx.shadowColor = NEON_COLOR;
                ctx.lineWidth = 1;
                ctx.strokeStyle = 'rgba(0, 229, 255, 0.1)';
                ctx.shadowBlur = 0;

                // Static grid lines for depth
                for (let angle = 0; angle < Math.PI * 2; angle += Math.PI / 12) {
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(centerX + maxRadius * Math.cos(angle), centerY + maxRadius * Math.sin(angle));
                    ctx.stroke();
                }

                // Dynamic elements
                elements.forEach(el => {
                    el.angle += el.speed;
                    const radius = maxRadius * el.radiusFactor;
                    
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(el.angle);

                    // Draw a short, glowing segment
                    ctx.beginPath();
                    ctx.arc(0, 0, radius, 0, el.length);
                    ctx.strokeStyle = el.radiusFactor > 0.6 ? ACCENT_COLOR : NEON_COLOR;
                    ctx.lineWidth = 2;
                    ctx.shadowBlur = el.radiusFactor > 0.6 ? 15 : 8;
                    ctx.stroke();

                    ctx.restore();
                });
                
                // Central Ring (Static focus)
                ctx.beginPath();
                ctx.arc(centerX, centerY, maxRadius * 0.15, 0, Math.PI * 2);
                ctx.strokeStyle = NEON_COLOR;
                ctx.shadowBlur = 10;
                ctx.stroke();


                requestAnimationFrame(draw);
            };
            draw();
        };

        // --- Right Canvas Animation (Vertical Scrolling Data) ---
        let lines = [];
        const lineHeight = 12; 
        let scrollY = 0;

        // Function MUST be exposed globally or passed to setupCanvas for window resize to call it
        window.initializeLines = (height) => { 
            lines.length = 0;
            // Re-initialize based on the new canvas height
            for (let y = 0; y < height / lineHeight + 3; y++) {
                lines.push({
                    length: Math.random() * 0.7 + 0.1, 
                    alpha: Math.random() * 0.3 + 0.1,
                    speed: Math.random() * 0.05 + 0.02,
                    yPos: y * lineHeight
                });
            }
        };

        const rightAnimation = () => {
            const { canvas, ctx } = setupCanvas('canvas-right');
            
            // Call initializeLines once to populate the array based on initial size
            initializeLines(canvas.height);

            const draw = () => {
                const { width, height } = canvas;
                ctx.clearRect(0, 0, width, height); 
                
                ctx.font = '10px "Share Tech Mono"';
                ctx.shadowBlur = 5;
                ctx.shadowColor = NEON_COLOR;

                scrollY += 0.5; // Scroll speed

                if (scrollY > lineHeight) {
                    scrollY -= lineHeight;
                    // Add a new line at the top
                    lines.unshift({
                        length: Math.random() * 0.7 + 0.1, 
                        alpha: Math.random() * 0.3 + 0.1,
                        speed: Math.random() * 0.05 + 0.02,
                        yPos: -lineHeight 
                    });
                    // Remove line at the bottom
                    lines.pop();
                }
                
                lines.forEach((line, index) => {
                    // Update Y position based on scrollY offset
                    line.yPos = index * lineHeight - scrollY;

                    // Fade out lines that are going off the bottom
                    if (line.yPos > height) {
                        return;
                    }
                    
                    // Update alpha for a subtle flicker/movement
                    line.alpha = Math.min(1, Math.max(0.1, line.alpha + Math.sin(Date.now() * line.speed + index) * 0.01));

                    ctx.fillStyle = `rgba(0, 229, 255, ${line.alpha})`;
                    
                    // Draw the line of random data
                    const charCount = Math.floor(width / 7); // Approx characters that fit
                    let lineStr = '';
                    for(let i=0; i < charCount * line.length; i++) {
                        lineStr += Math.random() > 0.5 ? '1' : '0';
                    }
                    
                    ctx.fillText(lineStr, 0, line.yPos);
                });

                requestAnimationFrame(draw);
            };
            draw();
        };

        // --- Main Initialization and Interval Setup ---
        const initializeSystem = () => {
            updateClocks();
            updateSystemMetrics();
            updateNetworkMetrics();
            updateLogStream();
            
            // Set up all timed updates
            setInterval(updateClocks, 1000); // Clock updates every second
            setInterval(updateSystemMetrics, 2000); // Metrics update every 2 seconds
            setInterval(updateNetworkMetrics, 5000); // Network updates every 5 seconds
            setInterval(updateLogStream, 1500); // Log stream updates every 1.5 seconds

            // Start Canvas Animations
            centerAnimation();
            rightAnimation();
        };

        window.onload = initializeSystem;
    </script>
</body>
</html>